//=================================================================================
// CombatSystem.hpp
// Author: Tyler George
// Date  : September 22, 2015
//=================================================================================

#pragma once

#ifndef __included_CombatSystem__
#define __included_CombatSystem__

///---------------------------------------------------------------------------------
/// Includes
///---------------------------------------------------------------------------------
#include "Engine\Math\IntRange.hpp"

class Entity;
class Item;

///---------------------------------------------------------------------------------
/// Structs
///---------------------------------------------------------------------------------

struct AttackData
{
    Entity* attacker;
    Entity* target;
    IntRange damageRange;
    float chanceToHit;
    float chanceToCrit;
    std::string attackVerb;
    IntRange armorRange;
    Item* primaryWeapon;
};

struct AttackResult
{
    bool didHit;
    bool didCrit;
    int damageDone;
    bool targetDied;
};

///---------------------------------------------------------------------------------
/// Typedefs
///---------------------------------------------------------------------------------


////===========================================================================================
///===========================================================================================
// Faction Class
///===========================================================================================
////===========================================================================================
class CombatSystem
{
public:
    ///---------------------------------------------------------------------------------
    /// Constructors/Destructors
    ///---------------------------------------------------------------------------------
    ~CombatSystem();

    ///---------------------------------------------------------------------------------
    /// Initialization
    ///---------------------------------------------------------------------------------

    ///---------------------------------------------------------------------------------
    /// Accessors/Queries
    ///---------------------------------------------------------------------------------
    static AttackResult PerformMeleeAttack( const AttackData& data );


    ///---------------------------------------------------------------------------------
    /// Mutators
    ///---------------------------------------------------------------------------------

    ///---------------------------------------------------------------------------------
    /// Public Member Variables
    ///---------------------------------------------------------------------------------

    ///---------------------------------------------------------------------------------
    /// Static Variables
    ///---------------------------------------------------------------------------------


private:
    ///---------------------------------------------------------------------------------
    /// Private Functions
    ///---------------------------------------------------------------------------------
    CombatSystem();

    ///---------------------------------------------------------------------------------
    /// Private Member Variables
    ///---------------------------------------------------------------------------------

    ///---------------------------------------------------------------------------------
    /// Private Static Variables
    ///---------------------------------------------------------------------------------
    static CombatSystem s_theCombatSystem;


};

///---------------------------------------------------------------------------------
/// Inline function implementations
///---------------------------------------------------------------------------------


#endif // CombatSystem