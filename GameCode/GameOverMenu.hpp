//=================================================================================
// GameOverMenu.hpp
// Author: Tyler George
// Date  : August 20, 2015
//=================================================================================

#pragma once

#ifndef __included_GameOverMenu__
#define __included_GameOverMenu__

///---------------------------------------------------------------------------------
/// Includes
///---------------------------------------------------------------------------------
#include "Engine/Renderer/OpenGLRenderer.hpp"
#include "Engine/Input/InputSystem.hpp"
#include "Engine/Renderer/FontRenderer.hpp"
#include "Entities/Player.hpp"

///---------------------------------------------------------------------------------
/// Typedefs
///---------------------------------------------------------------------------------

///---------------------------------------------------------------------------------
/// Enums
///---------------------------------------------------------------------------------

enum GameOverMenuState
{
    GOMS_DO_NOTHING,
    GOMS_IS_READY_TO_QUIT,
    GOMS_GO_TO_QUEST
};

////===========================================================================================
///===========================================================================================
// GameOverMenu Class
///===========================================================================================
////===========================================================================================
class GameOverMenu
{
public:
    ///---------------------------------------------------------------------------------
    /// Constructors/Destructors
    ///---------------------------------------------------------------------------------
    GameOverMenu( Vector2 displaySize, unsigned int basicShaderID, unsigned int fontShaderID );
    ~GameOverMenu();

    ///---------------------------------------------------------------------------------
    /// Initialization
    ///---------------------------------------------------------------------------------
    void Startup( Font* titleFont, Font* font );

    ///---------------------------------------------------------------------------------
    /// Accessors/Queries
    ///---------------------------------------------------------------------------------

    ///---------------------------------------------------------------------------------
    /// Mutators
    ///---------------------------------------------------------------------------------
    void Reset();
    void SetPlayer( Player* player ) { m_player = player; }

    ///---------------------------------------------------------------------------------
    /// Update
    ///---------------------------------------------------------------------------------
    void ProcessInput( InputSystem* inputSystem, double deltaseconds );
    GameOverMenuState Update( double deltaseconds, bool debugModeEnabled );

    ///---------------------------------------------------------------------------------
    /// Render
    ///---------------------------------------------------------------------------------
    void Render( OpenGLRenderer* renderer, FontRenderer* fontRenderer, bool debugModeEnabled );

    ///---------------------------------------------------------------------------------
    /// Public Member Variables
    ///---------------------------------------------------------------------------------

    ///---------------------------------------------------------------------------------
    /// Static Variables
    ///---------------------------------------------------------------------------------


private:
    ///---------------------------------------------------------------------------------
    /// Private Functions
    ///---------------------------------------------------------------------------------
    void SetState( GameOverMenuState newState );

    ///---------------------------------------------------------------------------------
    /// Private Member Variables
    ///---------------------------------------------------------------------------------
    Vector2 m_displaySize;

    unsigned int m_basicShaderID;
    unsigned int m_fontShaderID;

    Font* m_titleFont;
    Font* m_font;

    Vector2 m_mouseCoords;

    Player* m_player;

    GameOverMenuState m_state;

};

///---------------------------------------------------------------------------------
/// Inline function implementations
///---------------------------------------------------------------------------------

#endif